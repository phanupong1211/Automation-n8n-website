{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/phanu/Automation-n8n%2Bwebiste/Automation-n8n%2Bwebiste/src/lib/webhook-security.ts"],"sourcesContent":["import crypto from 'crypto';\n\n// Webhook secret - in production, store in environment variables\nconst WEBHOOK_SECRET = process.env.WEBHOOK_SECRET || 'boom-portfolio-webhook-secret-2024';\n\n/**\n * Generate HMAC signature for webhook payload\n */\nexport function generateSignature(payload: string): string {\n  return crypto\n    .createHmac('sha256', WEBHOOK_SECRET)\n    .update(payload, 'utf8')\n    .digest('hex');\n}\n\n/**\n * Verify webhook signature\n */\nexport function verifySignature(payload: string, signature: string): boolean {\n  const expectedSignature = generateSignature(payload);\n  \n  // Use crypto.timingSafeEqual to prevent timing attacks\n  const expectedBuffer = Buffer.from(`sha256=${expectedSignature}`, 'utf8');\n  const actualBuffer = Buffer.from(signature, 'utf8');\n  \n  if (expectedBuffer.length !== actualBuffer.length) {\n    return false;\n  }\n  \n  return crypto.timingSafeEqual(expectedBuffer, actualBuffer);\n}\n\n/**\n * Generate signature header for outgoing webhooks\n */\nexport function createSignatureHeader(payload: string): string {\n  return `sha256=${generateSignature(payload)}`;\n}\n\n/**\n * Validate incoming webhook request\n */\nexport function validateWebhookRequest(\n  payload: string, \n  signatureHeader: string | null\n): { valid: boolean; error?: string } {\n  if (!signatureHeader) {\n    return { valid: false, error: 'Missing signature header' };\n  }\n\n  if (!signatureHeader.startsWith('sha256=')) {\n    return { valid: false, error: 'Invalid signature format' };\n  }\n\n  const isValid = verifySignature(payload, signatureHeader);\n  \n  if (!isValid) {\n    return { valid: false, error: 'Invalid signature' };\n  }\n\n  return { valid: true };\n}\n\n/**\n * Generate session-based token for additional security\n */\nexport function generateSessionToken(sessionId: string): string {\n  const timestamp = Date.now().toString();\n  const data = `${sessionId}:${timestamp}`;\n  const signature = crypto\n    .createHmac('sha256', WEBHOOK_SECRET)\n    .update(data, 'utf8')\n    .digest('hex');\n  \n  return `${timestamp}.${signature}`;\n}\n\n/**\n * Verify session token (valid for 1 hour)\n */\nexport function verifySessionToken(sessionId: string, token: string): boolean {\n  try {\n    const [timestamp, signature] = token.split('.');\n    \n    if (!timestamp || !signature) {\n      return false;\n    }\n\n    // Check if token is not older than 1 hour\n    const tokenTime = parseInt(timestamp);\n    const now = Date.now();\n    const oneHour = 60 * 60 * 1000;\n    \n    if (now - tokenTime > oneHour) {\n      return false;\n    }\n\n    // Verify signature\n    const data = `${sessionId}:${timestamp}`;\n    const expectedSignature = crypto\n      .createHmac('sha256', WEBHOOK_SECRET)\n      .update(data, 'utf8')\n      .digest('hex');\n\n    return crypto.timingSafeEqual(\n      Buffer.from(signature, 'hex'),\n      Buffer.from(expectedSignature, 'hex')\n    );\n  } catch (error) {\n    return false;\n  }\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,iEAAiE;AACjE,MAAM,iBAAiB,QAAQ,GAAG,CAAC,cAAc,IAAI;AAK9C,SAAS,kBAAkB,OAAe;IAC/C,OAAO,qGAAA,CAAA,UAAM,CACV,UAAU,CAAC,UAAU,gBACrB,MAAM,CAAC,SAAS,QAChB,MAAM,CAAC;AACZ;AAKO,SAAS,gBAAgB,OAAe,EAAE,SAAiB;IAChE,MAAM,oBAAoB,kBAAkB;IAE5C,uDAAuD;IACvD,MAAM,iBAAiB,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,mBAAmB,EAAE;IAClE,MAAM,eAAe,OAAO,IAAI,CAAC,WAAW;IAE5C,IAAI,eAAe,MAAM,KAAK,aAAa,MAAM,EAAE;QACjD,OAAO;IACT;IAEA,OAAO,qGAAA,CAAA,UAAM,CAAC,eAAe,CAAC,gBAAgB;AAChD;AAKO,SAAS,sBAAsB,OAAe;IACnD,OAAO,CAAC,OAAO,EAAE,kBAAkB,UAAU;AAC/C;AAKO,SAAS,uBACd,OAAe,EACf,eAA8B;IAE9B,IAAI,CAAC,iBAAiB;QACpB,OAAO;YAAE,OAAO;YAAO,OAAO;QAA2B;IAC3D;IAEA,IAAI,CAAC,gBAAgB,UAAU,CAAC,YAAY;QAC1C,OAAO;YAAE,OAAO;YAAO,OAAO;QAA2B;IAC3D;IAEA,MAAM,UAAU,gBAAgB,SAAS;IAEzC,IAAI,CAAC,SAAS;QACZ,OAAO;YAAE,OAAO;YAAO,OAAO;QAAoB;IACpD;IAEA,OAAO;QAAE,OAAO;IAAK;AACvB;AAKO,SAAS,qBAAqB,SAAiB;IACpD,MAAM,YAAY,KAAK,GAAG,GAAG,QAAQ;IACrC,MAAM,OAAO,GAAG,UAAU,CAAC,EAAE,WAAW;IACxC,MAAM,YAAY,qGAAA,CAAA,UAAM,CACrB,UAAU,CAAC,UAAU,gBACrB,MAAM,CAAC,MAAM,QACb,MAAM,CAAC;IAEV,OAAO,GAAG,UAAU,CAAC,EAAE,WAAW;AACpC;AAKO,SAAS,mBAAmB,SAAiB,EAAE,KAAa;IACjE,IAAI;QACF,MAAM,CAAC,WAAW,UAAU,GAAG,MAAM,KAAK,CAAC;QAE3C,IAAI,CAAC,aAAa,CAAC,WAAW;YAC5B,OAAO;QACT;QAEA,0CAA0C;QAC1C,MAAM,YAAY,SAAS;QAC3B,MAAM,MAAM,KAAK,GAAG;QACpB,MAAM,UAAU,KAAK,KAAK;QAE1B,IAAI,MAAM,YAAY,SAAS;YAC7B,OAAO;QACT;QAEA,mBAAmB;QACnB,MAAM,OAAO,GAAG,UAAU,CAAC,EAAE,WAAW;QACxC,MAAM,oBAAoB,qGAAA,CAAA,UAAM,CAC7B,UAAU,CAAC,UAAU,gBACrB,MAAM,CAAC,MAAM,QACb,MAAM,CAAC;QAEV,OAAO,qGAAA,CAAA,UAAM,CAAC,eAAe,CAC3B,OAAO,IAAI,CAAC,WAAW,QACvB,OAAO,IAAI,CAAC,mBAAmB;IAEnC,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/phanu/Automation-n8n%2Bwebiste/Automation-n8n%2Bwebiste/src/app/api/chat/route.ts"],"sourcesContent":["//chatreport\nimport { NextRequest, NextResponse } from \"next/server\";\nimport { createSignatureHeader, generateSessionToken } from \"@/lib/webhook-security\";\n\n// Portfolio data for the AI to reference\nconst portfolioData = {\n  name: \"์NIS Automation Service (Instrument)\",\n  title: \"ผู้เชี่ยวชาญที่ให้บริการตรวจสอบ ซ่อมบำรุง และปรับปรุงอุปกรณ์อุตสาหกรรม\",\n  contact: {\n    phone: \"(+66) 85-835-1266\",\n    email: \"Phanupong_C@npp.co.th\",\n    address: \"1 tatoom, Srimahapot, Prachin buri 25140, Thailand\"\n  },\n  summary: \"เราคือทีมผู้เชี่ยวชาญที่ให้บริการตรวจสอบ ซ่อมบำรุง และปรับปรุงอุปกรณ์อุตสาหกรรม เช่น วาล์ว (Control Valve), เซฟตี้วาล์ว (Safety Valve), แท่นชั่งดิจิทัล (Weight Scale) และระบบวัดอัตราการไหล (Flow Measurement System) ด้วย ประสบการณ์และมาตรฐานคุณภาพสูง เรามุ่งเน้นเพิ่มประสิทธิภาพ และยืดอายุการใช้งานของเครื่องจักร\",\n  skills: {\n    Valve: [\"Valve maintenance\", \"Safety Valve maintenance\", \"Overhaul\", \"Leakage Test\", \"Calibration\",\"On-Line Test Safety Valve\"],\n    Flow: [\"flow tube maintenance\", \"flow measurement\", \"installation\", \"Commissioning\", \"Ultrasonic Clamp On\"],\n    Scale: [\"weight scale calibration\", \"Truck scale maintenance\", \"Load Cell Check\", \"Floor Scale maintenance\", \"Electric Floor Scale maintenance\"],\n    IoT: [\"Lorawan\", \"Remote Control\", \"IoT Solution\", \"Dashboards\", \"Automation system\"],\n    other: [\"Develop, improve, and analyze the automation section's machinery and equipment.\"]\n  },\n  projects: [\n    {\n      name: \"Smart Utility Water Monitoring System\",\n      client: \"NS304\",\n      year: \"2025\",\n      category: \"IoT\",\n      description: \"ประยุกต์ใช้เทคโนโลยี LoRaWAN ในพื้นที่สำคัญของระบบ Utility เพื่อเพิ่มประสิทธิภาพในการตรวจสอบการใช้น้ำแบบเรียลไทม์ ลดความจำเป็นในการใช้บุคลากรออกตรวจวัดข้อมูล ณ สถานที่จริงในแต่ละวัน และสามารถรองรับการวิเคราะห์ข้อมูลเชิงลึกเพื่อใช้ในการบริหารจัดการทรัพยากรน้ำอย่างแม่นยำ\",\n      tech: [\"LoRaWAN\", \"Flow measurement\", \"Gateway installation\",\"Signal 4-20mA\"]\n    },\n    {\n      name: \"AMR Water meter (ระบบอ่านหน่วยมิเตอร์น้ำอัตโนมัติ)\",\n      client: \"NS304\",\n      year: \"2025\",\n      category: \"IoT\",\n      description: \"เพิ่มประสิทธิภาพในการบริหารจัดการการใช้น้ำและลดภาระงานในการจดบันทึกหน่วยน้ำแบบ Manual หน่วยงานจึงดำเนินการพัฒนาและติดตั้งระบบ AMR (Automatic Meter Reading) โดยใช้อุปกรณ์วัดอัตราการไหลที่สามารถส่งข้อมูลอัตโนมัติผ่าน LoRaWAN Module ซึ่งสามารถอ่านค่าได้แบบเรียลไทม์ และส่งข้อมูลเข้าสู่ระบบ Dashboard เพื่อช่วยในการตรวจสอบและวิเคราะห์แนวโน้มการใช้น้ำได้อย่างแม่นยำ สอดรับกับแนวทางการพัฒนาโครงสร้างพื้นฐานแบบ Smart Utility\",\n      tech: [\"LoRaWAN\", \"Flow measurement\",\"Automatic measurement Reading\"]\n    },\n    {\n      name: \"Bloom Automatic (การควบคุมระบบรดน้ำต้นกล้าผ่านระบบสื่อสารระยะไกล)\",\n      client: \"Tree-tech\",\n      category: \"IoT\",\n      description: \"นำเทคโนโลยี IoT มาประยุกต์ใช้ หน่วยงานจึงได้นำอุปกรณ์ LoRaWAN LT2222L มาเชื่อมต่อกับระบบรดน้ำต้นกล้า พร้อมออกแบบการควบคุมและสั่งงานจากระยะไกลผ่าน Dashboard หรือ Mobile Application โดยมีเป้าหมายให้สามารถควบคุมได้ 100% เพิ่มประสิทธิภาพและลดการใช้แรงงานคนในระยะยาว\",\n      tech: [\"LoRaWAN\", \"Remote Control\", \"Remote IO\",\"Automatic measurement Reading\"]\n    },\n    {\n      name: \"On-Line Test Safety Valve\",\n      client: \"Trevitest\",\n      category: [\"valve\",\"maintenance\"],\n      description: \"หาค่า Set point ในระบบที่แท้จริง ในขณะที่วาล์วยังติดตั้งใช้งานจริง ในตำแหน่งจริง และควบคุมระบบตามที่ออกแบบไว้ตามจริง\",\n      tech: [\"Safety Valve\", \"maintenance\", \"On line\",\"Solution\"]\n    },\n    {\n      name: \"Web HTML\",\n      client: \"Web\",\n      category: \"Other\",\n      description: \"การเขียน HTML คือการสร้างโครงสร้างพื้นฐานของหน้าเว็บโดยใช้ภาษา HTML ซึ่งประกอบด้วยแท็ก (tags) ที่บอกเบราว์เซอร์ว่าจะแสดงผลเนื้อหาอย่างไร\",\n      tech: [\"Web deverlop\", \"HTML\", \"AI\"]\n    }\n  ],\n};\n\nexport async function POST(request: NextRequest) {\n  let userMessage = \"\";\n  let sessionId = \"\";\n\n  try {\n    const { message, history, sessionId: clientSessionId } = await request.json();\n    userMessage = message || \"\";\n    sessionId = clientSessionId || `session_${Date.now()}`;\n\n    if (!userMessage) {\n      return NextResponse.json(\n        { error: \"Message is required\" },\n        { status: 400 }\n      );\n    }\n\n    console.log(`[Chat API] Session: ${sessionId}, Message: ${userMessage.substring(0, 50)}...`);\n\n    // Try to send to n8n webhook first\n    try {\n      const payload = JSON.stringify({\n        message: userMessage,\n        history,\n        portfolioData,\n        sessionId,\n        responseUrl: `http://localhost:3001/api/webhook`,\n        sessionToken: generateSessionToken(sessionId),\n        timestamp: new Date().toISOString()\n      });\n\n      const signature = createSignatureHeader(payload);\n\n      const webhookResponse = await fetch(\"http://localhost:5678/webhook/addcb960-afcc-4b62-8f41-105b65b53429\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-session-id\": sessionId,\n          \"x-webhook-source\": \"portfolio-chat\",\n          \"x-signature\": signature,\n        },\n        body: payload,\n        // Add timeout to prevent hanging\n        signal: AbortSignal.timeout(15000) // 15 second timeout\n      });\n\n      if (webhookResponse.ok) {\n        const webhookData = await webhookResponse.json();\n        console.log(`[Chat API] Webhook success for session ${sessionId}:`, webhookData);\n\n        // Check if n8n will send response via webhook (async mode)\n        if (webhookData.useSSE || webhookData.async || webhookData.status === 'processing' ||\n            (webhookData.message && webhookData.message.includes('Workflow was started'))) {\n          console.log(`[Chat API] Using SSE mode for session ${sessionId} - n8n will send response later`);\n          return NextResponse.json({\n            success: true,\n            useSSE: true,\n            sessionId,\n            message: \"Response will be sent via real-time connection\"\n          });\n        }\n\n        // Handle immediate response formats\n        let responseMessage = \"\";\n        if (typeof webhookData === 'string') {\n          responseMessage = webhookData;\n        } else if (webhookData.response) {\n          responseMessage = webhookData.response;\n        } else if (webhookData.message) {\n          responseMessage = webhookData.message;\n        } else if (webhookData.reply) {\n          responseMessage = webhookData.reply;\n        } else if (webhookData.text) {\n          responseMessage = webhookData.text;\n        } else {\n          // If webhook returns unexpected format, log it and use fallback\n          console.log(`[Chat API] Unexpected webhook response format:`, webhookData);\n          console.log(`[Chat API] Using fallback response for session ${sessionId}`);\n          throw new Error(\"Unexpected webhook response format\");\n        }\n\n        console.log(`[Chat API] Immediate response for session ${sessionId}:`, responseMessage);\n        return NextResponse.json({ message: responseMessage, useSSE: false });\n      } else {\n        const errorText = await webhookResponse.text();\n        console.log(`[Chat API] Webhook error ${webhookResponse.status}:`, errorText);\n        throw new Error(`Webhook returned status: ${webhookResponse.status}`);\n      }\n    } catch (webhookError) {\n      console.log(`[Chat API] Webhook failed for session ${sessionId}, using fallback:`, webhookError);\n      // Fallback to local response if webhook fails\n      const response = generateResponse(userMessage.toLowerCase());\n      console.log(`[Chat API] Fallback response for session ${sessionId}:`, response.substring(0, 100) + \"...\");\n      return NextResponse.json({\n        message: response,\n        useSSE: false,\n        fallback: true\n      });\n    }\n  } catch (error) {\n    console.error(`[Chat API] Final error for session ${sessionId}:`, error);\n    // Final fallback\n    const response = generateResponse(userMessage.toLowerCase() || \"\");\n    console.log(`[Chat API] Final fallback response for session ${sessionId}:`, response.substring(0, 100) + \"...\");\n    return NextResponse.json({\n      message: response,\n      useSSE: false,\n      fallback: true,\n      error: \"System temporarily unavailable\"\n    });\n  }\n}\n\nfunction generateResponse(message: string): string { //ตอบเมื่อ n8n ล่ม\n  // Skills-related queries\n  if (message.includes(\"skill\") || message.includes(\"หน้าที่\") || message.includes(\"ทักษะ\") || message.includes(\"งาน\") || message.includes(\"บริการ\")|| message.includes(\"รับงาน\")) {\n    return `ทีม Instrument service มีทักษะและความเชี่ยวชาญในงาน Maintenance และ Automation ดังนี้:\n  🔧 Valve: ${portfolioData.skills.Valve.join(\", \")}\n  💧 Flow Measurement: ${portfolioData.skills.Flow.join(\", \")}\n  ⚖️ Scale: ${portfolioData.skills.Scale.join(\", \")}\n  🌐 IoT & Automation: ${portfolioData.skills.IoT.join(\", \")}\n  🛠 อื่นๆ: ${portfolioData.skills.other.join(\", \")}\n\n  เรามีจุดเด่นในการเพิ่มประสิทธิภาพ ตรวจสอบ และซ่อมบำรุงระบบอุตสาหกรรมให้พร้อมใช้งานสูงสุด!`;\n  }\n\n  // Experience-related queries\n  if (message.includes(\"experience\") || message.includes(\"work\") || message.includes(\"job\") || message.includes(\"ประสบการณ์\") || message.includes(\"เชี่ยวชาญ\")) {\n    return `ทีม Instrument service มีประสบการณ์มากกว่า 4 ปี ในการให้บริการ Maintenance Engineering สำหรับอุปกรณ์อุตสาหกรรม เช่น Control Valve, Safety Valve, Weight Scale และ Flow Measurement System โดยมุ่งเน้นเพิ่มความน่าเชื่อถือ ลด Downtime และยืดอายุการใช้งานเครื่องจักรให้กับลูกค้าในหลายภาคอุตสาหกรรม.`;\n  }\n\n  // Projects-related queries\n  if (message.includes(\"โปรเจค\") || message.includes(\"project\") || message.includes(\"technology\")|| message.includes(\"portfolio\") || message.includes(\"ผลงาน\") || message.includes(\"โครงการ\") || message.includes(\"IoT\")|| message.includes(\"Lorawan\") || message.includes(\"smart\")) {\n    return `นี่คือตัวอย่างโปรเจกต์สำคัญของทีม Instrument service:\n\n  🚰 Smart Utility Water Monitoring System - ใช้ LoRaWAN ตรวจสอบการใช้น้ำแบบเรียลไทม์ ลดภาระการตรวจวัดหน้างาน, \n  💧 AMR Water Meter - ระบบอ่านหน่วยมิเตอร์น้ำอัตโนมัติ ส่งข้อมูลเข้าสู่ Dashboard, \n  🌱 Bloom Automatic - ระบบควบคุมรดน้ำต้นกล้าผ่าน Dashboard และ Mobile App\n\n  ทุกโปรเจกต์มุ่งพัฒนาการบำรุงรักษาเชิงป้องกัน (Preventive Maintenance) และเพิ่มประสิทธิภาพกระบวนการผลิต.`;\n  }\n\n  // Contact-related queries\n  if (message.includes(\"contact\") || message.includes(\"email\") || message.includes(\"phone\") || message.includes(\"reach\") || message.includes(\"ติดต่อ\")) {\n    return `คุณสามารถติดต่อทีม Instrument service ได้ที่:\n\n  📧 Email: ${portfolioData.contact.email}\n  📱 Phone: ${portfolioData.contact.phone}\n\n  เรายินดีให้คำปรึกษาและออกแบบบริการตรวจสอบ/ซ่อมบำรุงให้เหมาะกับโรงงานหรือหน่วยงานของคุณ!`;\n  }\n\n  // General greeting or introduction\n  if (message.includes(\"hello\") || message.includes(\"hi\") || message.includes(\"สวัสดี\") || message.includes(\"who\") || message.includes(\"about\") || message.includes(\"เกี่ยวกับ\")) {\n    return `สวัสดีครับ! ผมเป็น AI ผู้ช่วยของทีม Instrument service👋\n\n  ${portfolioData.summary}\n\n  คุณสามารถถามเกี่ยวกับ:\n  • 🔧 ทักษะและความเชี่ยวชาญด้านงาน Maintenance & Automation, \n  • 🏗️ ประสบการณ์และโครงการที่ผ่านมา, \n  • 📞 ช่องทางการติดต่อและบริการ, \n  • 🌐 การนำ IoT และ AI มาใช้ในงานบำรุงรักษา, \n\nสนใจเรื่องไหนเป็นพิเศษ แจ้งได้เลยครับ!`;\n  }\n\n  // Default fallback\n  return `ขอบคุณสำหรับคำถามครับ! ขณะนี้ระบบตอบคำถามอัจฉริยะขัดข้อง หากคุณสนใจเรื่องงานซ่อมบำรุง วาล์ว เซฟตี้วาล์ว แท่นชั่งดิจิทัล ระบบวัดอัตราการไหล หรือ IoT สามารถติดต่อช่องทางดังนี้ได้เลยครับ😀\n\n  📧 Email: ${portfolioData.contact.email}, \n  📱 Phone: ${portfolioData.contact.phone}\n  `;\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}