(()=>{var e={};e.id=276,e.ids=[276],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1018:(e,s,t)=>{"use strict";t.r(s),t.d(s,{patchFetch:()=>g,routeModule:()=>p,serverHooks:()=>f,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>h});var n={};t.r(n),t.d(n,{POST:()=>d});var o=t(6559),a=t(8088),r=t(7719),i=t(2190),l=t(5901);let c={contact:{phone:"(+66) 85-835-1266",email:"Phanupong_C@npp.co.th",address:"1 tatoom, Srimahapot, Prachin buri 25140, Thailand"},summary:"เราคือทีมผู้เชี่ยวชาญที่ให้บริการตรวจสอบ ซ่อมบำรุง และปรับปรุงอุปกรณ์อุตสาหกรรม เช่น วาล์ว (Control Valve), เซฟตี้วาล์ว (Safety Valve), แท่นชั่งดิจิทัล (Weight Scale) และระบบวัดอัตราการไหล (Flow Measurement System) ด้วย ประสบการณ์และมาตรฐานคุณภาพสูง เรามุ่งเน้นเพิ่มประสิทธิภาพ และยืดอายุการใช้งานของเครื่องจักร",skills:{Valve:["Valve maintenance","Safety Valve maintenance","Overhaul","Leakage Test","Calibration","On-Line Test Safety Valve"],Flow:["flow tube maintenance","flow measurement","installation","Commissioning","Ultrasonic Clamp On"],Scale:["weight scale calibration","Truck scale maintenance","Load Cell Check","Floor Scale maintenance","Electric Floor Scale maintenance"],IoT:["Lorawan","Remote Control","IoT Solution","Dashboards","Automation system"],other:["Develop, improve, and analyze the automation section's machinery and equipment."]}};function u(e){return e.includes("skill")||e.includes("หน้าที่")||e.includes("ทักษะ")||e.includes("งาน")||e.includes("บริการ")||e.includes("รับงาน")?`ทีม Instrument service มีทักษะและความเชี่ยวชาญในงาน Maintenance และ Automation ดังนี้:
    🔧 Valve: ${c.skills.Valve.join(", ")}
    💧 Flow Measurement: ${c.skills.Flow.join(", ")}
    ⚖️ Scale: ${c.skills.Scale.join(", ")}
    🌐 IoT & Automation: ${c.skills.IoT.join(", ")}
    🛠 อื่นๆ: ${c.skills.other.join(", ")}

    เรามีจุดเด่นในการเพิ่มประสิทธิภาพ ตรวจสอบ และซ่อมบำรุงระบบอุตสาหกรรมให้พร้อมใช้งานสูงสุด!`:e.includes("experience")||e.includes("work")||e.includes("job")||e.includes("ประสบการณ์")||e.includes("เชี่ยวชาญ")?`ทีม Instrument service มีประสบการณ์มากกว่า 4 ปี ในการให้บริการ Maintenance Engineering สำหรับอุปกรณ์อุตสาหกรรม เช่น Control Valve, Safety Valve, Weight Scale และ Flow Measurement System โดยมุ่งเน้นเพิ่มความน่าเชื่อถือ ลด Downtime และยืดอายุการใช้งานเครื่องจักรให้กับลูกค้าในหลายภาคอุตสาหกรรม.`:e.includes("โปรเจค")||e.includes("project")||e.includes("technology")||e.includes("portfolio")||e.includes("ผลงาน")||e.includes("โครงการ")||e.includes("IoT")||e.includes("Lorawan")||e.includes("smart")?`นี่คือตัวอย่างโปรเจกต์สำคัญของทีม Instrument service:

    🚰 Smart Utility Water Monitoring System - ใช้ LoRaWAN ตรวจสอบการใช้น้ำแบบเรียลไทม์ ลดภาระการตรวจวัดหน้างาน, 
    💧 AMR Water Meter - ระบบอ่านหน่วยมิเตอร์น้ำอัตโนมัติ ส่งข้อมูลเข้าสู่ Dashboard, 
    🌱 Bloom Automatic - ระบบควบคุมรดน้ำต้นกล้าผ่าน Dashboard และ Mobile App

    ทุกโปรเจกต์มุ่งพัฒนาการบำรุงรักษาเชิงป้องกัน (Preventive Maintenance) และเพิ่มประสิทธิภาพกระบวนการผลิต.`:e.includes("contact")||e.includes("email")||e.includes("phone")||e.includes("reach")||e.includes("ติดต่อ")?`คุณสามารถติดต่อทีม Instrument service ได้ที่:

    📧 Email: ${c.contact.email}
    📱 Phone: ${c.contact.phone}

    เรายินดีให้คำปรึกษาและออกแบบบริการตรวจสอบ/ซ่อมบำรุงให้เหมาะกับโรงงานหรือหน่วยงานของคุณ!`:e.includes("hello")||e.includes("hi")||e.includes("สวัสดี")||e.includes("who")||e.includes("about")||e.includes("เกี่ยวกับ")?`สวัสดีครับ! ผมเป็น AI ผู้ช่วยของทีม Instrument service👋

    ${c.summary}

    คุณสามารถถามเกี่ยวกับ:
    • 🔧 ทักษะและความเชี่ยวชาญด้านงาน Maintenance & Automation, 
    • 🏗️ ประสบการณ์และโครงการที่ผ่านมา, 
    • 📞 ช่องทางการติดต่อและบริการ, 
    • 🌐 การนำ IoT และ AI มาใช้ในงานบำรุงรักษา, 

    สนใจเรื่องไหนเป็นพิเศษ แจ้งได้เลยครับ!`:`ขอบคุณสำหรับคำถามครับ! ขณะนี้ระบบตอบคำถามอัจฉริยะขัดข้อง หากคุณสนใจเรื่องงานซ่อมบำรุง วาล์ว เซฟตี้วาล์ว แท่นชั่งดิจิทัล ระบบวัดอัตราการไหล หรือ IoT สามารถติดต่อช่องทางดังนี้ได้เลยครับ😀

  📧 Email: ${c.contact.email}, 
  📱 Phone: ${c.contact.phone}
  `}async function d(e){let s="",t="";try{let{message:n,history:o,sessionId:a}=await e.json();if(s=n||"",t=a||`session_${Date.now()}`,!s)return i.NextResponse.json({error:"Message is required"},{status:400});console.log(`[Chat API] Session: ${t}, Message: ${s.substring(0,50)}...`);try{let e=JSON.stringify({message:s,history:o,sessionId:t,responseUrl:"https://automation-n8n-website.onrender.com/api/webhook",sessionToken:(0,l.F$)(t),timestamp:new Date().toISOString()}),n=(0,l.wF)(e),a=await fetch("http://localhost:5678/webhook/addcb960-afcc-4b62-8f41-105b65b53429",{method:"POST",headers:{"Content-Type":"application/json","x-session-id":t,"x-webhook-source":"portfolio-chat","x-signature":n},body:e,signal:AbortSignal.timeout(15e3)});if(a.ok){let e=await a.json();if(console.log(`[Chat API] Webhook success for session ${t}:`,e),e.useSSE||e.async||"processing"===e.status||e.message&&e.message.includes("Workflow was started"))return console.log(`[Chat API] Using SSE mode for session ${t} - n8n will send response later`),i.NextResponse.json({success:!0,useSSE:!0,sessionId:t,message:"Response will be sent via real-time connection"});let s="";if("string"==typeof e)s=e;else if(e.response)s=e.response;else if(e.message)s=e.message;else if(e.reply)s=e.reply;else if(e.text)s=e.text;else throw console.log("[Chat API] Unexpected webhook response format:",e),console.log(`[Chat API] Using fallback response for session ${t}`),Error("Unexpected webhook response format");return console.log(`[Chat API] Immediate response for session ${t}:`,s),i.NextResponse.json({message:s,useSSE:!1})}{let e=await a.text();throw console.log(`[Chat API] Webhook error ${a.status}:`,e),Error(`Webhook returned status: ${a.status}`)}}catch(n){console.log(`[Chat API] Webhook failed for session ${t}, using fallback:`,n);let e=u(s.toLowerCase());return console.log(`[Chat API] Fallback response for session ${t}:`,e.substring(0,100)+"..."),i.NextResponse.json({message:e,useSSE:!1,fallback:!0})}}catch(n){console.error(`[Chat API] Final error for session ${t}:`,n);let e=u(s.toLowerCase()||"");return console.log(`[Chat API] Final fallback response for session ${t}:`,e.substring(0,100)+"..."),i.NextResponse.json({message:e,useSSE:!1,fallback:!0,error:"System temporarily unavailable"})}}let p=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/chat/route",pathname:"/api/chat",filename:"route",bundlePath:"app/api/chat/route"},resolvedPagePath:"C:\\Users\\phanu\\Automation-n8n+webiste\\Automation-n8n+webiste\\src\\app\\api\\chat\\route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:m,workUnitAsyncStorage:h,serverHooks:f}=p;function g(){return(0,r.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:h})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5901:(e,s,t)=>{"use strict";t.d(s,{wF:()=>i,F$:()=>c,Rw:()=>l});let n=require("crypto");var o=t.n(n);let a=process.env.WEBHOOK_SECRET||"boom-portfolio-webhook-secret-2024";function r(e){return o().createHmac("sha256",a).update(e,"utf8").digest("hex")}function i(e){return`sha256=${r(e)}`}function l(e,s){return s?s.startsWith("sha256=")?!function(e,s){let t=r(e),n=Buffer.from(`sha256=${t}`,"utf8"),a=Buffer.from(s,"utf8");return n.length===a.length&&o().timingSafeEqual(n,a)}(e,s)?{valid:!1,error:"Invalid signature"}:{valid:!0}:{valid:!1,error:"Invalid signature format"}:{valid:!1,error:"Missing signature header"}}function c(e){let s=Date.now().toString(),t=`${e}:${s}`,n=o().createHmac("sha256",a).update(t,"utf8").digest("hex");return`${s}.${n}`}},6487:()=>{},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),n=s.X(0,[719,580],()=>t(1018));module.exports=n})();