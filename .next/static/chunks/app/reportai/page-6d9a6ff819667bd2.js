(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51],{1154:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2486:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},8329:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(5155),r=a(2115),n=a(1154),l=a(2486);function i(){let[e,t]=(0,r.useState)([{id:"1",content:"Hello! I'm your AI assistant for valve maintenance services. How can I help you today?",role:"assistant",timestamp:new Date}]),[a,i]=(0,r.useState)(""),[o,c]=(0,r.useState)(!1),[d]=(0,r.useState)(()=>{{let e=localStorage.getItem("sessionId");return e||(e="session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),localStorage.setItem("sessionId",e)),e}}),u=(0,r.useRef)(null);(0,r.useEffect)(()=>{m()},[e]);let m=()=>{var e;null==(e=u.current)||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{let e=new EventSource("/api/sse?sessionId=".concat(d));return e.onmessage=e=>{try{let a=JSON.parse(e.data);"response"===a.type&&(t(e=>[...e.filter(e=>!e.isLoading),{id:Date.now().toString(),content:a.message,role:"assistant",timestamp:new Date}]),c(!1))}catch(e){}},e.onerror=()=>e.close(),()=>e.close()},[d]);let g=async s=>{let r=s||a;if(!r.trim()||o)return;let n={id:Date.now().toString(),content:r,role:"user",timestamp:new Date};t(e=>[...e,n,{id:"loading_".concat(Date.now()),content:"Thinking...",role:"assistant",timestamp:new Date,isLoading:!0}]),i(""),c(!0);try{let a=await fetch("/api/chatreport",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:r,history:e,sessionId:d})}),s=await a.json();s.message&&!s.useSSE&&(t(e=>e.filter(e=>!e.isLoading).concat({id:Date.now().toString(),content:s.message,role:"assistant",timestamp:new Date})),c(!1))}catch(e){t(e=>e.filter(e=>!e.isLoading).concat({id:Date.now().toString(),content:"Sorry, there was a problem. Please try again.",role:"assistant",timestamp:new Date})),c(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white flex flex-col items-center py-12",children:[(0,s.jsx)("div",{className:"max-w-2xl w-full text-center mb-10",children:(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,s.jsx)("div",{className:"text-blue-500",children:(0,s.jsx)("svg",{width:"40",height:"40",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:""})})}),(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"AI Assistant"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Get instant answers about our valve maintenance services"})]})}),(0,s.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-md rounded-xl p-6 max-w-3xl w-full space-y-4 shadow-lg",children:[e.map(e=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"p-3 rounded-lg max-w-[75%] ".concat("user"===e.role?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"),children:[e.isLoading?(0,s.jsx)(n.A,{className:"animate-spin w-4 h-4 inline"}):null,(0,s.jsx)("span",{className:"ml-1",children:e.content})]})},e.id)),(0,s.jsx)("div",{ref:u})]}),(0,s.jsxs)("div",{className:"mt-6 flex w-full max-w-3xl space-x-2",children:[(0,s.jsx)("input",{type:"text",className:"flex-1 p-3 rounded-lg bg-gray-900 border border-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Type your question about valve services...",value:a,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key&&g()},disabled:o}),(0,s.jsx)("button",{onClick:()=>g(),className:"bg-blue-600 p-3 rounded-lg hover:bg-blue-700 transition disabled:opacity-50",disabled:!a.trim()||o,children:(0,s.jsx)(l.A,{size:20})})]}),(0,s.jsxs)("div",{className:"mt-8 w-full max-w-3xl",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Quick Questions"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["ขอรายละเอียดงานซ่อม Tage No.: 463TV561 ","Tage No.: 463TV561 ใช้เครื่องมืออะไรบ้าง","Tage No.: 463TV561 ใช้เวลาถอดกี่นาที","พื้นที่ 412 มีวาล์วอะไรบ้าง"].map(e=>(0,s.jsx)("button",{onClick:()=>g(e),className:"w-full p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition text-left",children:e},e))})]})]})}},9627:(e,t,a)=>{Promise.resolve().then(a.bind(a,8329))},9946:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var s=a(2115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),l=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:d="",children:u,iconNode:m,...g}=e;return(0,s.createElement)("svg",{ref:t,...c,width:r,height:r,stroke:a,strokeWidth:l?24*Number(n)/Number(r):n,className:i("lucide",d),...!u&&!o(g)&&{"aria-hidden":"true"},...g},[...m.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let a=(0,s.forwardRef)((a,n)=>{let{className:o,...c}=a;return(0,s.createElement)(d,{ref:n,iconNode:t,className:i("lucide-".concat(r(l(e))),"lucide-".concat(e),o),...c})});return a.displayName=l(e),a}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(9627)),_N_E=e.O()}]);